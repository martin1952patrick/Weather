{"ast":null,"code":"import _regeneratorRuntime from\"/home/martin/Documents/Martin/RAPID/Weather/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/martin/Documents/Martin/RAPID/Weather/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/martin/Documents/Martin/RAPID/Weather/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{getWeatherByCityName,getWeatherByCoordinates}from'./api/WeatherService';import SearchBox from'./components/SearchBox';import Weather from'./components/Weather';import{StyledApp}from'./styles/App.styled';import Loader from'./components/UI/Loader';import{useLoading}from'./Hooks/useLoading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var initialState={coord:{lon:10.99,lat:44.34},weather:[{id:501,main:\"Rain\",description:\"moderate rain\",icon:\"10n\"}],base:\"stations\",main:{temp:29,feels_like:30,temp_min:24,temp_max:31,pressure:1015,humidity:64,sea_level:1015,grnd_level:933},visibility:10000,wind:{speed:0.62,deg:349,gust:1.18},rain:{\"1h\":3.16},clouds:{all:100},dt:1661870592,sys:{type:2,id:2075663,country:\"IT\",sunrise:1661834187,sunset:1663870592},timezone:7200,id:3163858,name:\"Zocca\",cod:200};var _transformWeatherItem=function _transformWeatherItem(item){var newWeatherItem={id:item.id,cityName:item.name,countryName:item.sys.country,time:item.dt,timeRise:_transformDateItem(item.sys.sunrise),timeDown:_transformDateItem(item.sys.sunset),weather:{id:item.weather[0].id,name:item.weather[0].main,description:item.weather[0].description,icon:item.weather[0].icon},main:{temp:Math.round(item.main.temp),tempFeels:Math.round(item.main.feels_like),temp_min:Math.round(item.main.temp_min),temp_max:Math.round(item.main.temp_max),humidity:item.main.humidity,pressure:item.main.pressure},wind:{speed:item.wind.speed}};return newWeatherItem;};var _transformDateItem=function _transformDateItem(date){var options={hour:'numeric',minute:'numeric'};var newDate=new Date(date*1000);return newDate.toLocaleString('en',options);};var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentWeather=_useState2[0],setCurrentWeather=_useState2[1];var _useState3=useState(\"Chop\"),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),city=_useState6[0],setCity=_useState6[1];var _useLoading=useLoading(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getWeatherByCityName(query);case 2:response=_context.sent;if(!(response==undefined)){_context.next=7;break;}_context.next=6;return getWeatherByCoordinates(city===null||city===void 0?void 0:city.latitude,city===null||city===void 0?void 0:city.longitude);case 6:response=_context.sent;case 7:setCurrentWeather(_transformWeatherItem(response));case 8:case\"end\":return _context.stop();}}},_callee);}))),_useLoading2=_slicedToArray(_useLoading,3),getWeather=_useLoading2[0],isLoading=_useLoading2[1],error=_useLoading2[2];useEffect(function(){setCurrentWeather(_transformWeatherItem(initialState));getWeather();},[query,city]);return/*#__PURE__*/_jsxs(StyledApp,{children:[/*#__PURE__*/_jsx(SearchBox,{query:query,setQuery:setQuery,setCity:setCity}),/*#__PURE__*/_jsx(Weather,{item:currentWeather,isLoading:isLoading}),/*#__PURE__*/_jsx(Loader,{isLoading:isLoading})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","getWeatherByCityName","getWeatherByCoordinates","SearchBox","Weather","StyledApp","Loader","useLoading","App","initialState","coord","lon","lat","weather","id","main","description","icon","base","temp","feels_like","temp_min","temp_max","pressure","humidity","sea_level","grnd_level","visibility","wind","speed","deg","gust","rain","clouds","all","dt","sys","type","country","sunrise","sunset","timezone","name","cod","_transformWeatherItem","item","newWeatherItem","cityName","countryName","time","timeRise","_transformDateItem","timeDown","Math","round","tempFeels","date","options","hour","minute","newDate","Date","toLocaleString","currentWeather","setCurrentWeather","query","setQuery","city","setCity","response","undefined","latitude","longitude","getWeather","isLoading","error"],"sources":["/home/martin/Documents/Martin/RAPID/Weather/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getWeatherByCityName, getWeatherByCoordinates } from './api/WeatherService';\nimport SearchBox from './components/SearchBox';\nimport Weather from './components/Weather';\nimport { StyledApp } from './styles/App.styled';\nimport { IWEatherItem } from './types/weather';\nimport { ICity } from './types/city';\nimport Loader from './components/UI/Loader';\nimport { useLoading } from './Hooks/useLoading';\n\n\nfunction App() {\n\n  const initialState: any = {\n    coord: {\n      lon: 10.99,\n      lat: 44.34\n    },\n    weather: [\n      {\n        id: 501,\n        main: \"Rain\",\n        description: \"moderate rain\",\n        icon: \"10n\"\n      }\n    ],\n    base: \"stations\",\n    main: {\n      temp: 29,\n      feels_like: 30,\n      temp_min: 24,\n      temp_max: 31,\n      pressure: 1015,\n      humidity: 64,\n      sea_level: 1015,\n      grnd_level: 933\n    },\n    visibility: 10000,\n    wind: {\n      speed: 0.62,\n      deg: 349,\n      gust: 1.18\n    },\n    rain: {\n      \"1h\": 3.16\n    },\n    clouds: {\n      all: 100\n    },\n    dt: 1661870592,\n    sys: {\n      type: 2,\n      id: 2075663,\n      country: \"IT\",\n      sunrise: 1661834187,\n      sunset: 1663870592\n    },\n    timezone: 7200,\n    id: 3163858,\n    name: \"Zocca\",\n    cod: 200\n  }\n\n  const _transformWeatherItem = (item: any) => {\n    const newWeatherItem: IWEatherItem =  {\n      id: item.id,\n      cityName: item.name,\n      countryName: item.sys.country,\n      time: item.dt,\n      timeRise: _transformDateItem(item.sys.sunrise),\n      timeDown: _transformDateItem(item.sys.sunset),\n      weather: {\n          id: item.weather[0].id,\n          name: item.weather[0].main,\n          description: item.weather[0].description,\n          icon: item.weather[0].icon\n      },\n      main: {\n          temp: Math.round(item.main.temp),\n          tempFeels: Math.round(item.main.feels_like),\n          temp_min: Math.round(item.main.temp_min),\n          temp_max: Math.round(item.main.temp_max),\n          humidity: item.main.humidity,\n          pressure: item.main.pressure,\n      },\n      wind: {\n          speed: item.wind.speed\n      }\n    }\n    return newWeatherItem\n  }\n  \n  const _transformDateItem = (date: number) => {\n    const options: object = {\n      hour: 'numeric',\n      minute: 'numeric'\n    }\n\n    const newDate = new Date(date * 1000)\n\n    return newDate.toLocaleString('en', options)\n  }\n\n  const [currentWeather, setCurrentWeather] = useState<IWEatherItem>()\n  const [query, setQuery] = useState(\"Chop\")\n  const [city, setCity] = useState<ICity>()\n\n  const [getWeather, isLoading, error] = useLoading(async () => {\n      let response = await getWeatherByCityName(query)\n      if(response == undefined){\n        response = await getWeatherByCoordinates(city?.latitude, city?.longitude)\n      }\n      setCurrentWeather(_transformWeatherItem(response))\n  })\n\n  useEffect( () => {\n\n  setCurrentWeather(_transformWeatherItem(initialState))\n     getWeather() \n  }, [query, city])\n  \n\n  return (\n    <StyledApp>\n      <SearchBox query={query} setQuery={setQuery} setCity={setCity}/>\n      <Weather item={currentWeather} isLoading={isLoading}/>\n      <Loader isLoading={isLoading}/>\n    </StyledApp>    \n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
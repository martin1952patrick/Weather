{"ast":null,"code":"import _slicedToArray from\"/home/martin/Documents/Martin/RAPID/Weather/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useMemo}from'react';import{SearchForm,SearchInput,StyledForm}from'../styles/SearchBox.styled';import debounce from'lodash.debounce';import Icon from'./Icon';import{getCities}from'../api/CityServices';import CitySugesstions from'./CitySugesstions';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchBox=function SearchBox(_ref){var query=_ref.query,setQuery=_ref.setQuery,setCity=_ref.setCity;useEffect(function(){},[query]);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),active=_useState4[0],setActive=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),suggestions=_useState6[0],setSuggestions=_useState6[1];var changeHandler=function changeHandler(event){setValue(event.target.value);if(event.target.value!==\"\"){getCities(event.target.value).then(function(res){if(res){setSuggestions(res.data);setActive(true);}});}};var debouncedChangeHandler=useMemo(function(){return debounce(changeHandler,1000);},[]);var submitHandler=function submitHandler(event){event.preventDefault();setWeather(value,null);};var setWeather=function setWeather(cityName,cityItem){if(cityName&&!cityItem){setQuery(cityName);setActive(false);}if(cityName&&cityItem){setCity(cityItem);setActive(false);}setQuery(cityName);setActive(false);setValue('');};return/*#__PURE__*/_jsx(SearchForm,{children:/*#__PURE__*/_jsxs(StyledForm,{action:\"\",onSubmit:function onSubmit(e){return submitHandler(e);},children:[/*#__PURE__*/_jsx(Icon,{isBig:false,iconName:\"loupe\",isLoupe:true}),/*#__PURE__*/_jsx(SearchInput,{type:\"text\",placeholder:\"Enter city name\",onChange:debouncedChangeHandler}),value!==''?/*#__PURE__*/_jsx(CitySugesstions,{isActive:active,setWeather:setWeather,cities:suggestions}):/*#__PURE__*/_jsx(_Fragment,{})]})});};export default SearchBox;","map":{"version":3,"names":["React","useState","useEffect","useMemo","SearchForm","SearchInput","StyledForm","debounce","Icon","getCities","CitySugesstions","SearchBox","query","setQuery","setCity","value","setValue","active","setActive","suggestions","setSuggestions","changeHandler","event","target","then","res","data","debouncedChangeHandler","submitHandler","preventDefault","setWeather","cityName","cityItem","e"],"sources":["/home/martin/Documents/Martin/RAPID/Weather/src/components/SearchBox.tsx"],"sourcesContent":["import React, {FC, useState, useEffect, useMemo} from 'react'\nimport { SearchForm, SearchInput, StyledForm } from '../styles/SearchBox.styled'\nimport debounce from 'lodash.debounce'\nimport { ICity } from '../types/city';\n\n\nimport Icon from './Icon';\nimport { getCities } from '../api/CityServices';\nimport CitySugesstions from './CitySugesstions';\n\ninterface ISearchProps {\n    query: string;\n    setQuery: (text: string) => void\n    setCity: (city: ICity) => void\n}\n\n\nconst SearchBox:FC<ISearchProps> = ({query, setQuery, setCity}) => {\n\n  useEffect(() => {\n\n  }, [query])\n  \n  const [value, setValue] = useState(\"\")\n  const [active, setActive] = useState(false)\n  const [suggestions, setSuggestions] = useState([])\n\n  const changeHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(event.target.value)\n\n    if(event.target.value !== \"\") {\n      getCities(event.target.value)\n      .then(res => {\n        if(res) {\n          setSuggestions(res.data)\n          setActive(true)\n        }\n      })\n    }\n  }\n\n  const debouncedChangeHandler = useMemo(\n    () => debounce(changeHandler, 1000)\n  , []);\n\n  const submitHandler = (event: React.FormEvent) => {\n    event.preventDefault()\n    setWeather(value, null)\n  }\n\n  const setWeather = (cityName: string, cityItem: any) => {\n    if(cityName && !cityItem) {\n      setQuery(cityName)\n      setActive(false)\n    }\n\n    if(cityName && cityItem) {\n      setCity(cityItem)\n      setActive(false)\n    }\n\n    setQuery(cityName)\n    setActive(false)\n    setValue('')\n  }\n\n\n  return (\n    <SearchForm>\n      <StyledForm action=\"\" onSubmit={(e) => submitHandler(e)}>\n        <Icon isBig={false} iconName=\"loupe\" isLoupe={true}/>\n        <SearchInput type=\"text\" \n          placeholder='Enter city name' \n          onChange={debouncedChangeHandler} \n        />\n        {value !== '' \n      ? <CitySugesstions isActive={active}\n          setWeather={setWeather} \n          cities={suggestions} \n        /> \n      : <></>}\n      </StyledForm>\n      \n    </SearchForm>\n  )\n}\n\nexport default SearchBox"],"mappings":"iIAAA,MAAOA,MAAP,EAAmBC,QAAnB,CAA6BC,SAA7B,CAAwCC,OAAxC,KAAsD,OAAtD,CACA,OAASC,UAAT,CAAqBC,WAArB,CAAkCC,UAAlC,KAAoD,4BAApD,CACA,MAAOC,SAAP,KAAqB,iBAArB,CAIA,MAAOC,KAAP,KAAiB,QAAjB,CACA,OAASC,SAAT,KAA0B,qBAA1B,CACA,MAAOC,gBAAP,KAA4B,mBAA5B,C,6IASA,GAAMC,UAA0B,CAAG,QAA7BA,UAA6B,MAAgC,IAA9BC,MAA8B,MAA9BA,KAA8B,CAAvBC,QAAuB,MAAvBA,QAAuB,CAAbC,OAAa,MAAbA,OAAa,CAEjEZ,SAAS,CAAC,UAAM,CAEf,CAFQ,CAEN,CAACU,KAAD,CAFM,CAAT,CAIA,cAA0BX,QAAQ,CAAC,EAAD,CAAlC,wCAAOc,KAAP,eAAcC,QAAd,eACA,eAA4Bf,QAAQ,CAAC,KAAD,CAApC,yCAAOgB,MAAP,eAAeC,SAAf,eACA,eAAsCjB,QAAQ,CAAC,EAAD,CAA9C,yCAAOkB,WAAP,eAAoBC,cAApB,eAEA,GAAMC,cAAa,CAAG,QAAhBA,cAAgB,CAACC,KAAD,CAAgD,CACpEN,QAAQ,CAACM,KAAK,CAACC,MAAN,CAAaR,KAAd,CAAR,CAEA,GAAGO,KAAK,CAACC,MAAN,CAAaR,KAAb,GAAuB,EAA1B,CAA8B,CAC5BN,SAAS,CAACa,KAAK,CAACC,MAAN,CAAaR,KAAd,CAAT,CACCS,IADD,CACM,SAAAC,GAAG,CAAI,CACX,GAAGA,GAAH,CAAQ,CACNL,cAAc,CAACK,GAAG,CAACC,IAAL,CAAd,CACAR,SAAS,CAAC,IAAD,CAAT,CACD,CACF,CAND,EAOD,CACF,CAZD,CAcA,GAAMS,uBAAsB,CAAGxB,OAAO,CACpC,iBAAMI,SAAQ,CAACc,aAAD,CAAgB,IAAhB,CAAd,EADoC,CAEpC,EAFoC,CAAtC,CAIA,GAAMO,cAAa,CAAG,QAAhBA,cAAgB,CAACN,KAAD,CAA4B,CAChDA,KAAK,CAACO,cAAN,GACAC,UAAU,CAACf,KAAD,CAAQ,IAAR,CAAV,CACD,CAHD,CAKA,GAAMe,WAAU,CAAG,QAAbA,WAAa,CAACC,QAAD,CAAmBC,QAAnB,CAAqC,CACtD,GAAGD,QAAQ,EAAI,CAACC,QAAhB,CAA0B,CACxBnB,QAAQ,CAACkB,QAAD,CAAR,CACAb,SAAS,CAAC,KAAD,CAAT,CACD,CAED,GAAGa,QAAQ,EAAIC,QAAf,CAAyB,CACvBlB,OAAO,CAACkB,QAAD,CAAP,CACAd,SAAS,CAAC,KAAD,CAAT,CACD,CAEDL,QAAQ,CAACkB,QAAD,CAAR,CACAb,SAAS,CAAC,KAAD,CAAT,CACAF,QAAQ,CAAC,EAAD,CAAR,CACD,CAdD,CAiBA,mBACE,KAAC,UAAD,wBACE,MAAC,UAAD,EAAY,MAAM,CAAC,EAAnB,CAAsB,QAAQ,CAAE,kBAACiB,CAAD,QAAOL,cAAa,CAACK,CAAD,CAApB,EAAhC,wBACE,KAAC,IAAD,EAAM,KAAK,CAAE,KAAb,CAAoB,QAAQ,CAAC,OAA7B,CAAqC,OAAO,CAAE,IAA9C,EADF,cAEE,KAAC,WAAD,EAAa,IAAI,CAAC,MAAlB,CACE,WAAW,CAAC,iBADd,CAEE,QAAQ,CAAEN,sBAFZ,EAFF,CAMGZ,KAAK,GAAK,EAAV,cACD,KAAC,eAAD,EAAiB,QAAQ,CAAEE,MAA3B,CACE,UAAU,CAAEa,UADd,CAEE,MAAM,CAAEX,WAFV,EADC,cAKD,kBAXF,GADF,EADF,CAkBD,CApED,CAsEA,cAAeR,UAAf"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/home/martin/Documents/Martin/RAPID/Weather/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/martin/Documents/Martin/RAPID/Weather/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/martin/Documents/Martin/RAPID/Weather/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{getWeatherByCityName,getWeatherByCoordinates}from'./api/WeatherService';import SearchBox from'./components/SearchBox';import Weather from'./components/Weather';import{StyledApp}from'./styles/App.styled';import Loader from'./components/UI/Loader';import{useLoading}from'./Hooks/useLoading';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var initialState={coord:{lon:10.99,lat:44.34},weather:[{id:501,main:\"Rain\",description:\"moderate rain\",icon:\"10n\"}],base:\"stations\",main:{temp:29,feels_like:30,temp_min:24,temp_max:31,pressure:1015,humidity:64,sea_level:1015,grnd_level:933},visibility:10000,wind:{speed:0.62,deg:349,gust:1.18},rain:{\"1h\":3.16},clouds:{all:100},dt:1661870592,sys:{type:2,id:2075663,country:\"IT\",sunrise:1661834187,sunset:1663870592},timezone:7200,id:3163858,name:\"Zocca\",cod:200};var _transformWeatherItem=function _transformWeatherItem(item){var newWeatherItem={id:item.id,cityName:item.name,countryName:item.sys.country,time:item.dt,timeRise:_transformDateItem(item.sys.sunrise),timeDown:_transformDateItem(item.sys.sunset),weather:{id:item.weather[0].id,name:item.weather[0].main,description:item.weather[0].description,icon:item.weather[0].icon},main:{temp:Math.round(item.main.temp),tempFeels:Math.round(item.main.feels_like),temp_min:Math.round(item.main.temp_min),temp_max:Math.round(item.main.temp_max),humidity:item.main.humidity,pressure:item.main.pressure},wind:{speed:item.wind.speed}};return newWeatherItem;};var _transformDateItem=function _transformDateItem(date){var options={hour:'numeric',minute:'numeric'};var newDate=new Date(date*1000);return newDate.toLocaleString('en',options);};var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentWeather=_useState2[0],setCurrentWeather=_useState2[1];var _useState3=useState(\"Chop\"),_useState4=_slicedToArray(_useState3,2),query=_useState4[0],setQuery=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),city=_useState6[0],setCity=_useState6[1];var _useLoading=useLoading(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getWeatherByCityName(query);case 2:response=_context.sent;if(!(response==undefined)){_context.next=7;break;}_context.next=6;return getWeatherByCoordinates(city===null||city===void 0?void 0:city.latitude,city===null||city===void 0?void 0:city.longitude);case 6:response=_context.sent;case 7:setCurrentWeather(_transformWeatherItem(response));case 8:case\"end\":return _context.stop();}},_callee);}))),_useLoading2=_slicedToArray(_useLoading,3),getWeather=_useLoading2[0],isLoading=_useLoading2[1],error=_useLoading2[2];useEffect(function(){setCurrentWeather(_transformWeatherItem(initialState));getWeather();},[query,city]);return/*#__PURE__*/_jsxs(StyledApp,{children:[/*#__PURE__*/_jsx(SearchBox,{query:query,setQuery:setQuery,setCity:setCity}),/*#__PURE__*/_jsx(Weather,{item:currentWeather,isLoading:isLoading}),/*#__PURE__*/_jsx(Loader,{isLoading:isLoading})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","getWeatherByCityName","getWeatherByCoordinates","SearchBox","Weather","StyledApp","Loader","useLoading","App","initialState","coord","lon","lat","weather","id","main","description","icon","base","temp","feels_like","temp_min","temp_max","pressure","humidity","sea_level","grnd_level","visibility","wind","speed","deg","gust","rain","clouds","all","dt","sys","type","country","sunrise","sunset","timezone","name","cod","_transformWeatherItem","item","newWeatherItem","cityName","countryName","time","timeRise","_transformDateItem","timeDown","Math","round","tempFeels","date","options","hour","minute","newDate","Date","toLocaleString","currentWeather","setCurrentWeather","query","setQuery","city","setCity","response","undefined","latitude","longitude","getWeather","isLoading","error"],"sources":["/home/martin/Documents/Martin/RAPID/Weather/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { getWeatherByCityName, getWeatherByCoordinates } from './api/WeatherService';\nimport SearchBox from './components/SearchBox';\nimport Weather from './components/Weather';\nimport { StyledApp } from './styles/App.styled';\nimport { IWEatherItem } from './types/weather';\nimport { ICity } from './types/city';\nimport Loader from './components/UI/Loader';\nimport { useLoading } from './Hooks/useLoading';\n\n\nfunction App() {\n\n  const initialState: any = {\n    coord: {\n      lon: 10.99,\n      lat: 44.34\n    },\n    weather: [\n      {\n        id: 501,\n        main: \"Rain\",\n        description: \"moderate rain\",\n        icon: \"10n\"\n      }\n    ],\n    base: \"stations\",\n    main: {\n      temp: 29,\n      feels_like: 30,\n      temp_min: 24,\n      temp_max: 31,\n      pressure: 1015,\n      humidity: 64,\n      sea_level: 1015,\n      grnd_level: 933\n    },\n    visibility: 10000,\n    wind: {\n      speed: 0.62,\n      deg: 349,\n      gust: 1.18\n    },\n    rain: {\n      \"1h\": 3.16\n    },\n    clouds: {\n      all: 100\n    },\n    dt: 1661870592,\n    sys: {\n      type: 2,\n      id: 2075663,\n      country: \"IT\",\n      sunrise: 1661834187,\n      sunset: 1663870592\n    },\n    timezone: 7200,\n    id: 3163858,\n    name: \"Zocca\",\n    cod: 200\n  }\n\n  const _transformWeatherItem = (item: any) => {\n    const newWeatherItem: IWEatherItem =  {\n      id: item.id,\n      cityName: item.name,\n      countryName: item.sys.country,\n      time: item.dt,\n      timeRise: _transformDateItem(item.sys.sunrise),\n      timeDown: _transformDateItem(item.sys.sunset),\n      weather: {\n          id: item.weather[0].id,\n          name: item.weather[0].main,\n          description: item.weather[0].description,\n          icon: item.weather[0].icon\n      },\n      main: {\n          temp: Math.round(item.main.temp),\n          tempFeels: Math.round(item.main.feels_like),\n          temp_min: Math.round(item.main.temp_min),\n          temp_max: Math.round(item.main.temp_max),\n          humidity: item.main.humidity,\n          pressure: item.main.pressure,\n      },\n      wind: {\n          speed: item.wind.speed\n      }\n    }\n    return newWeatherItem\n  }\n  \n  const _transformDateItem = (date: number) => {\n    const options: object = {\n      hour: 'numeric',\n      minute: 'numeric'\n    }\n\n    const newDate = new Date(date * 1000)\n\n    return newDate.toLocaleString('en', options)\n  }\n\n  const [currentWeather, setCurrentWeather] = useState<IWEatherItem>()\n  const [query, setQuery] = useState(\"Chop\")\n  const [city, setCity] = useState<ICity>()\n\n  const [getWeather, isLoading, error] = useLoading(async () => {\n      let response = await getWeatherByCityName(query)\n      if(response == undefined){\n        response = await getWeatherByCoordinates(city?.latitude, city?.longitude)\n      }\n      setCurrentWeather(_transformWeatherItem(response))\n  })\n\n  useEffect( () => {\n\n  setCurrentWeather(_transformWeatherItem(initialState))\n     getWeather() \n  }, [query, city])\n  \n\n  return (\n    <StyledApp>\n      <SearchBox query={query} setQuery={setQuery} setCity={setCity}/>\n      <Weather item={currentWeather} isLoading={isLoading}/>\n      <Loader isLoading={isLoading}/>\n    </StyledApp>    \n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _slicedToArray from\"/home/martin/Documents/Martin/RAPID/Weather/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useMemo}from'react';import{SearchForm,SearchInput,StyledForm}from'../styles/SearchBox.styled';import debounce from'lodash.debounce';import Icon from'./Icon';import{getCities}from'../api/CityServices';import CitySugesstions from'./CitySugesstions';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SearchBox=function SearchBox(_ref){var query=_ref.query,setQuery=_ref.setQuery,setCity=_ref.setCity;useEffect(function(){},[query]);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),active=_useState4[0],setActive=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),suggestions=_useState6[0],setSuggestions=_useState6[1];var changeHandler=function changeHandler(event){setValue(event.target.value);if(event.target.value!==\"\"){getCities(event.target.value).then(function(res){if(res){setSuggestions(res.data);setActive(true);}});}};var debouncedChangeHandler=useMemo(function(){return debounce(changeHandler,1000);},[]);var submitHandler=function submitHandler(event){event.preventDefault();setWeather(value,null);};var setWeather=function setWeather(cityName,cityItem){if(cityName&&!cityItem){setQuery(cityName);setActive(false);}if(cityName&&cityItem){setCity(cityItem);setActive(false);}setQuery(cityName);setActive(false);setValue('');};return/*#__PURE__*/_jsx(SearchForm,{children:/*#__PURE__*/_jsxs(StyledForm,{action:\"\",onSubmit:function onSubmit(e){return submitHandler(e);},children:[/*#__PURE__*/_jsx(Icon,{isBig:false,iconName:\"loupe\",isLoupe:true}),/*#__PURE__*/_jsx(SearchInput,{type:\"text\",placeholder:\"Enter city name\",onChange:debouncedChangeHandler}),value!==''?/*#__PURE__*/_jsx(CitySugesstions,{isActive:active,setWeather:setWeather,cities:suggestions}):/*#__PURE__*/_jsx(_Fragment,{})]})});};export default SearchBox;","map":{"version":3,"names":["React","useState","useEffect","useMemo","SearchForm","SearchInput","StyledForm","debounce","Icon","getCities","CitySugesstions","SearchBox","query","setQuery","setCity","value","setValue","active","setActive","suggestions","setSuggestions","changeHandler","event","target","then","res","data","debouncedChangeHandler","submitHandler","preventDefault","setWeather","cityName","cityItem","e"],"sources":["/home/martin/Documents/Martin/RAPID/Weather/src/components/SearchBox.tsx"],"sourcesContent":["import React, {FC, useState, useEffect, useMemo} from 'react'\nimport { SearchForm, SearchInput, StyledForm } from '../styles/SearchBox.styled'\nimport debounce from 'lodash.debounce'\nimport { ICity } from '../types/city';\n\n\nimport Icon from './Icon';\nimport { getCities } from '../api/CityServices';\nimport CitySugesstions from './CitySugesstions';\n\ninterface ISearchProps {\n    query: string;\n    setQuery: (text: string) => void\n    setCity: (city: ICity) => void\n}\n\n\nconst SearchBox:FC<ISearchProps> = ({query, setQuery, setCity}) => {\n\n  useEffect(() => {\n\n  }, [query])\n  \n  const [value, setValue] = useState(\"\")\n  const [active, setActive] = useState(false)\n  const [suggestions, setSuggestions] = useState([])\n\n  const changeHandler = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(event.target.value)\n\n    if(event.target.value !== \"\") {\n      getCities(event.target.value)\n      .then(res => {\n        if(res) {\n          setSuggestions(res.data)\n          setActive(true)\n        }\n      })\n    }\n  }\n\n  const debouncedChangeHandler = useMemo(\n    () => debounce(changeHandler, 1000)\n  , []);\n\n  const submitHandler = (event: React.FormEvent) => {\n    event.preventDefault()\n    setWeather(value, null)\n  }\n\n  const setWeather = (cityName: string, cityItem: any) => {\n    if(cityName && !cityItem) {\n      setQuery(cityName)\n      setActive(false)\n    }\n\n    if(cityName && cityItem) {\n      setCity(cityItem)\n      setActive(false)\n    }\n\n    setQuery(cityName)\n    setActive(false)\n    setValue('')\n  }\n\n\n  return (\n    <SearchForm>\n      <StyledForm action=\"\" onSubmit={(e) => submitHandler(e)}>\n        <Icon isBig={false} iconName=\"loupe\" isLoupe={true}/>\n        <SearchInput type=\"text\" \n          placeholder='Enter city name' \n          onChange={debouncedChangeHandler} \n        />\n        {value !== '' \n      ? <CitySugesstions isActive={active}\n          setWeather={setWeather} \n          cities={suggestions} \n        /> \n      : <></>}\n      </StyledForm>\n      \n    </SearchForm>\n  )\n}\n\nexport default SearchBox"],"mappings":"iIAAA,MAAOA,MAAK,EAAOC,QAAQ,CAAEC,SAAS,CAAEC,OAAO,KAAO,OAAO,CAC7D,OAASC,UAAU,CAAEC,WAAW,CAAEC,UAAU,KAAQ,4BAA4B,CAChF,MAAOC,SAAQ,KAAM,iBAAiB,CAItC,MAAOC,KAAI,KAAM,QAAQ,CACzB,OAASC,SAAS,KAAQ,qBAAqB,CAC/C,MAAOC,gBAAe,KAAM,mBAAmB,CAAC,6IAShD,GAAMC,UAA0B,CAAG,QAA7BA,UAA0B,MAAmC,IAA9BC,MAAK,MAALA,KAAK,CAAEC,QAAQ,MAARA,QAAQ,CAAEC,OAAO,MAAPA,OAAO,CAE3DZ,SAAS,CAAC,UAAM,CAEhB,CAAC,CAAE,CAACU,KAAK,CAAC,CAAC,CAEX,cAA0BX,QAAQ,CAAC,EAAE,CAAC,wCAA/Bc,KAAK,eAAEC,QAAQ,eACtB,eAA4Bf,QAAQ,CAAC,KAAK,CAAC,yCAApCgB,MAAM,eAAEC,SAAS,eACxB,eAAsCjB,QAAQ,CAAC,EAAE,CAAC,yCAA3CkB,WAAW,eAAEC,cAAc,eAElC,GAAMC,cAAa,CAAG,QAAhBA,cAAa,CAAIC,KAA0C,CAAK,CACpEN,QAAQ,CAACM,KAAK,CAACC,MAAM,CAACR,KAAK,CAAC,CAE5B,GAAGO,KAAK,CAACC,MAAM,CAACR,KAAK,GAAK,EAAE,CAAE,CAC5BN,SAAS,CAACa,KAAK,CAACC,MAAM,CAACR,KAAK,CAAC,CAC5BS,IAAI,CAAC,SAAAC,GAAG,CAAI,CACX,GAAGA,GAAG,CAAE,CACNL,cAAc,CAACK,GAAG,CAACC,IAAI,CAAC,CACxBR,SAAS,CAAC,IAAI,CAAC,CACjB,CACF,CAAC,CAAC,CACJ,CACF,CAAC,CAED,GAAMS,uBAAsB,CAAGxB,OAAO,CACpC,iBAAMI,SAAQ,CAACc,aAAa,CAAE,IAAI,CAAC,GACnC,EAAE,CAAC,CAEL,GAAMO,cAAa,CAAG,QAAhBA,cAAa,CAAIN,KAAsB,CAAK,CAChDA,KAAK,CAACO,cAAc,EAAE,CACtBC,UAAU,CAACf,KAAK,CAAE,IAAI,CAAC,CACzB,CAAC,CAED,GAAMe,WAAU,CAAG,QAAbA,WAAU,CAAIC,QAAgB,CAAEC,QAAa,CAAK,CACtD,GAAGD,QAAQ,EAAI,CAACC,QAAQ,CAAE,CACxBnB,QAAQ,CAACkB,QAAQ,CAAC,CAClBb,SAAS,CAAC,KAAK,CAAC,CAClB,CAEA,GAAGa,QAAQ,EAAIC,QAAQ,CAAE,CACvBlB,OAAO,CAACkB,QAAQ,CAAC,CACjBd,SAAS,CAAC,KAAK,CAAC,CAClB,CAEAL,QAAQ,CAACkB,QAAQ,CAAC,CAClBb,SAAS,CAAC,KAAK,CAAC,CAChBF,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,CAGD,mBACE,KAAC,UAAU,wBACT,MAAC,UAAU,EAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAE,kBAACiB,CAAC,QAAKL,cAAa,CAACK,CAAC,CAAC,EAAC,wBACtD,KAAC,IAAI,EAAC,KAAK,CAAE,KAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAE,IAAK,EAAE,cACrD,KAAC,WAAW,EAAC,IAAI,CAAC,MAAM,CACtB,WAAW,CAAC,iBAAiB,CAC7B,QAAQ,CAAEN,sBAAuB,EACjC,CACDZ,KAAK,GAAK,EAAE,cACb,KAAC,eAAe,EAAC,QAAQ,CAAEE,MAAO,CAChC,UAAU,CAAEa,UAAW,CACvB,MAAM,CAAEX,WAAY,EACpB,cACF,kBAAK,GACM,EAEF,CAEjB,CAAC,CAED,cAAeR,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}